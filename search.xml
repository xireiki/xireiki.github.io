<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>番茄小说网</title>
      <link href="/posts/3967353544/"/>
      <url>/posts/3967353544/</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>这是一个使用番茄小说官方网站的书源，需要开会员才可以正常看后面的章节，前面的章节是正常的。</p><p>这个书源已经在其他文章中发过<del>（虽然我后面把书源页删了）</del></p><p>感谢酷安@<a href="https://www.coolapk.com/u/22289064">茈钕孓不再恋爱</a>的提醒，告诉我书源正文、搜索乱码。</p><h2 id="下载-导入"><a href="#下载-导入" class="headerlink" title="下载/导入"></a>下载/导入</h2><h3 id="2024-03-25"><a href="#2024-03-25" class="headerlink" title="2024/03/25"></a>2024/03/25</h3><ul><li><a onclick='legado("https://gist.github.com/xireiki/192d9aa417f023772a9324e57a934a86/raw/a8b4d66f41b34cb022121085a48c49a6062de716/fanqie.json")'>一键导入</a></li><li><a onclick='legado("https://gist.github.com/xireiki/192d9aa417f023772a9324e57a934a86/raw/a8b4d66f41b34cb022121085a48c49a6062de716/fanqie.json","copy")'>复制链接</a></li></ul><h3 id="2024-03-24"><a href="#2024-03-24" class="headerlink" title="2024/03/24"></a>2024/03/24</h3><ul><li><a onclick='legado("https://gist.github.com/xireiki/192d9aa417f023772a9324e57a934a86/raw/17d95c5cd7f11f9a89f99cb0b0be4fdc4cba911f/fanqie.json")'>一键导入</a></li><li><a onclick='legado("https://gist.github.com/xireiki/192d9aa417f023772a9324e57a934a86/raw/17d95c5cd7f11f9a89f99cb0b0be4fdc4cba911f/fanqie.json","copy")'>复制链接</a></li></ul><h2 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h2><h3 id="2024-03-25-1"><a href="#2024-03-25-1" class="headerlink" title="2024/03/25"></a>2024/03/25</h3><ul><li>修复由 undefined 导致的 json 解析失败</li></ul><h3 id="2024-03-24-1"><a href="#2024-03-24-1" class="headerlink" title="2024/03/24"></a>2024/03/24</h3><ul><li>修复正文乱码</li><li>修复搜索乱码</li></ul><p>PS: 发现以后再修</p>]]></content>
      
      
      <categories>
          
          <category> 阅读 </category>
          
          <category> 书源 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
            <tag> 书源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记使用 sing-box 搭建 hysteria2 代理</title>
      <link href="/posts/3866594125/"/>
      <url>/posts/3866594125/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前用一键脚本搭建过 trojan 代理，但是一键脚本我不太喜欢。</p><p>想起 sing-box 的入站支持好多协议，就想着用它搭建一下玩玩。</p><h1 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h1><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><div class="table-container"><table><thead><tr><th style="text-align:center">项目</th><th style="text-align:center">版本</th></tr></thead><tbody><tr><td style="text-align:center">debian</td><td style="text-align:center">任意</td></tr><tr><td style="text-align:center">sing-box</td><td style="text-align:center">v1.8.0-alpha.17</td></tr></tbody></table></div><h2 id="过程-1"><a href="#过程-1" class="headerlink" title="过程"></a>过程</h2><h3 id="第一步，下载-sing-box"><a href="#第一步，下载-sing-box" class="headerlink" title="第一步，下载 sing-box"></a>第一步，下载 sing-box</h3><p>从 <a href="https://github.com/SagerNet/sing-box/releases">GitHub</a> 下载 sing-box 可执行文件。</p><p>我的服务器是 arm64 架构的 linux，所以下载 sing-box-1.8.0-alpha.17-linux-arm64.tar.gz</p><p>下载后使用 tar 命令解压文件，从 sing-box-1.8.0-alpha.17-linux-arm64（每个版本不一样，解压后只有一个文件夹）中找到 sing-box 并复制到配置目录（我的是 <strong>/root/proxy</strong>）后给予执行权限，命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /root/proxy</span><br><span class="line">wget https://github.com/SagerNet/sing-box/releases/download/v1.8.0-alpha.17/sing-box-1.8.0-alpha.17-linux-arm64.tar.gz</span><br><span class="line">tar -zxf sing-box-1.8.0-alpha.17-linux-arm64.tar.gz</span><br><span class="line"><span class="built_in">cp</span> sing-box-1.8.0-alpha.17-linux-arm64/sing-box /root/proxy</span><br><span class="line"><span class="built_in">cd</span> /root/proxy</span><br><span class="line"><span class="built_in">chmod</span> 700 sing-box</span><br></pre></td></tr></table></figure><h3 id="第二步，生成-pem-私钥和-csr-证书"><a href="#第二步，生成-pem-私钥和-csr-证书" class="headerlink" title="第二步，生成 pem 私钥和 csr 证书"></a>第二步，生成 pem 私钥和 csr 证书</h3><p>先使用 <code>sudo apt install openssl</code> 安装 openssl，用于生成私钥和证书</p><p>我把证书放在 /root/proxy/src 中，所以先创建文件夹: <code>mkdir -p /root/proxy/src</code></p><p>使用 <code>cd /root/proxy/src</code> 进入文件夹。</p><p>现在开始生成私钥，命令是这个 <code>openssl genpkey -algorithm RSA -out key.pem</code></p><p>注意！私钥不能是加密的，不然 sing-box 不认。</p><p>接着使用私钥生成证书请求 <strong>cert.csr</strong>，<code>openssl req -new -key key.pem -out cert.csr</code></p><p>这个命令将会生成一个证书请求，当然，用到了前面生成的私钥 <strong>key.pem</strong> 文件。</p><p>这里将生成一个新的文件 <strong>cert.csr</strong>，即一个证书请求文件，你可以拿着这个文件去数字证书颁发机构（即CA）申请一个数字证书。CA会给你一个新的文件 <strong>cert.pem</strong>，那才是你的数字证书。</p><p>当然，我就自己用用，没必要去 CA 申请。所以我们可以使用私钥 <strong>key.pem</strong> 和证书请求 <strong>cert.csr</strong> 生成一个数字证书，命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -<span class="keyword">in</span> cert.csr -signkey key.pem -out cert.pem -days 3650</span><br></pre></td></tr></table></figure><p>使用这个命令会提示输入一些信息，比如国家等，按照提示输入即可。</p><h3 id="第三步，写一个配置文件"><a href="#第三步，写一个配置文件" class="headerlink" title="第三步，写一个配置文件"></a>第三步，写一个配置文件</h3><p>我的配置文件名是 <strong>server.json</strong></p><p>主要字段如下（…表示省略）：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;inbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hysteria2&quot;</span><span class="punctuation">,</span> <span class="comment">// 入站类型</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hy2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;listen&quot;</span><span class="punctuation">:</span> <span class="string">&quot;::&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;listen_port&quot;</span><span class="punctuation">:</span> <span class="number">1081</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sniff&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sniff_override_destination&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;domain_strategy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prefer_ipv6&quot;</span><span class="punctuation">,</span> <span class="comment">// ipv6 优先</span></span><br><span class="line">      <span class="attr">&quot;up_mbps&quot;</span><span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;down_mbps&quot;</span><span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;users&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;root&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;abd12de3&quot;</span> <span class="comment">// 认证密码</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;certificate_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/cert.crt&quot;</span><span class="punctuation">,</span> <span class="comment">// 证书路径</span></span><br><span class="line">        <span class="attr">&quot;key_path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/key.pem&quot;</span> <span class="comment">// 私钥路径</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>具体配置可参考 <a href="https://sing-box.sagernet.org/zh">sing-box wiki</a></p><h3 id="第四步，使用-systemd-开机自启"><a href="#第四步，使用-systemd-开机自启" class="headerlink" title="第四步，使用 systemd 开机自启"></a>第四步，使用 systemd 开机自启</h3><p>在 <strong>/etc/systemd/system/myproxy.service</strong> 创建一个文件（myproxy.service），内容如下（根据实际情况修改）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=sing-box Proxy</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">WorkingDirectory=/root/proxy</span><br><span class="line">ExecStart=/root/proxy/sing-box -D /root/proxy -c /root/proxy/server.json run</span><br><span class="line">Restart=always</span><br></pre></td></tr></table></figure><p>接着使用 <code>systemctk enable myproxy</code> 命令启用开机自启。</p><h3 id="第五步，配置客户端出站"><a href="#第五步，配置客户端出站" class="headerlink" title="第五步，配置客户端出站"></a>第五步，配置客户端出站</h3><p>sing-box:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;outbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MyProxy&quot;</span><span class="punctuation">,</span> <span class="comment">// 出站名称，任意皆可</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hysteria2&quot;</span><span class="punctuation">,</span> <span class="comment">// 不能改，出站类型</span></span><br><span class="line">      <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx.xxx.xxx.xxx&quot;</span><span class="punctuation">,</span> <span class="comment">// 此处替换为你服务器IP地址</span></span><br><span class="line">      <span class="attr">&quot;server_port&quot;</span><span class="punctuation">:</span> <span class="number">1081</span><span class="punctuation">,</span> <span class="comment">// 你设置的端口</span></span><br><span class="line">      <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;abd12de3&quot;</span><span class="punctuation">,</span> <span class="comment">// 认证密码，输入你在 server.json 中配置的</span></span><br><span class="line">      <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;insecure&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;down_mbps&quot;</span><span class="punctuation">:</span> <span class="number">1000</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>clash.meta:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxies:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">MyProxy</span> <span class="comment">#名称任意</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">hysteria2</span></span><br><span class="line">    <span class="attr">server:</span> <span class="string">xxx.xxx.xxx.xxx</span> <span class="comment"># 服务器IP地址</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">1081</span> <span class="comment"># 你设置的端口</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">abd12de3</span> <span class="comment"># 认证密码</span></span><br><span class="line">    <span class="attr">insecure:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">down:</span> <span class="number">1000</span></span><br></pre></td></tr></table></figure><h3 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h3><p>愉快的开始使用吧！</p>]]></content>
      
      
      <categories>
          
          <category> 代理 </category>
          
          <category> 搭建 </category>
          
          <category> hysteria2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sing-box </tag>
            
            <tag> 代理 </tag>
            
            <tag> hysteria2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>神秘模块详细教程</title>
      <link href="/posts/1542838017/"/>
      <url>/posts/1542838017/</url>
      
        <content type="html"><![CDATA[<h1 id="阅读须知"><a href="#阅读须知" class="headerlink" title="阅读须知"></a>阅读须知</h1><ul><li>本教程所有代码块中以 $ 或 # 开头的是命令，没有的是命令执行结果或者代码</li><li>以 # 开头的命令是以 root 身份执行的，需要在执行 su 切换 root 身份后执行</li><li>本教程欢迎你来修改，修改可以前往<a href="https://github.com/xireiki/tutorial-mystery">GitHub</a>提交 issues 或者 Pull requests</li><li>不要在国内<strong>分享/提及 神秘模块/本教程</strong>，本教程可使用谷歌搜索“神秘教程”找到</li><li>群内发言询问前<strong>先查看本教程</strong>是否写明，已写明发言会<strong>被禁言</strong></li><li>如果你从国内平台跳转到的本教程，请<strong>举报</strong>他！不要在国内提及本教程！</li></ul><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><h2 id="sing-box-介绍"><a href="#sing-box-介绍" class="headerlink" title="sing-box 介绍"></a>sing-box 介绍</h2><ul><li>正如 <a href="https://github.com/SagerNet/sing-box">GitHub</a> 下简明的介绍一致，<a href="https://github.com/SagerNet/sing-box">sing-box</a> 是一款开源的通用代理软件，多平台兼容性好，性能优异。</li><li>由于 <a href="https://github.com/SagerNet/sing-box">sing-box</a> 内核本身并无 provider，单独使用时对于机场用户十分不友好，与此同时衍生出了 provider 分支，以及启动模块的外置 provider，也就是下文将要介绍到的神秘模块，除此之外还有 <a href="https://t.me/e58695">𝐄𝟓 𝟖𝟔 𝟗𝟓</a> 制作的 <a href="https://github.com/CHIZI-0618/box4magisk">box4magisk</a>，该启动模块可以使用 <a href="https://github.com/SagerNet/sing-box">sing-box</a> 的 <a href="https://github.com/PuerNya/sing-box/tree/building">provider</a> 分支。</li><li>本教程以 <a href="https://github.com/PuerNya">Puer 是只喵 喵～</a> 制作的 Android <a href="https://github.com/SagerNet/sing-box">sing-box</a> 启动模块神秘模块为基础，介绍 <a href="https://github.com/SagerNet/sing-box">sing-box</a> 的基础功能及使用方法。</li><li><a href="https://sing-box.sagernet.org/zh/">sing-box 官方文档</a></li></ul><h2 id="神秘介绍"><a href="#神秘介绍" class="headerlink" title="神秘介绍"></a>神秘介绍</h2><ul><li>神秘模块（下文所称的神秘）是 <a href="https://t.me/blowh2o/449">Puer 是只喵 喵～</a> 制作的 sing-box Magisk 模块，用于外置 provider(提供者，机场订阅) 并启动 sing-box 内核</li><li>神秘发布渠道为 Telegram 话题组 <a href="https://t.me/+1-1lPvQxklVlZjA1">原始人，启洞！</a> 下的“啊？”话题（特殊时期，已修改为私人群聊）</li><li>请仔细观看教程，不要在群里提问傻逼问题，右下角有文章索引目录</li></ul><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p><strong>绝对不要自作聪明地从 Play Store 安装 Termux！因为官方已放弃它的支持！</strong></p><p><strong>绝对不要自作聪明地从 Play Store 安装 Termux！因为官方已放弃它的支持！</strong></p><p><strong>绝对不要自作聪明地从 Play Store 安装 Termux！因为官方已放弃它的支持！</strong></p><h2 id="安装-Termux"><a href="#安装-Termux" class="headerlink" title="安装 Termux"></a>安装 <a href="https://github.com/termux/termux-app/releases">Termux</a></h2><p>Termux 有两个发布渠道，<a href="https://github.com/termux/termux-app/releases">Github</a> 和 <a href="https://f-droid.org/packages/com.termux/">F-Droid</a>，小白建议下载 <a href="https://f-droid.org/packages/com.termux/">F-Droid</a> 的版本（点击文字前往对应下载渠道）</p><h2 id="安装-nodejs-和-aapt（电脑版请查看-README-md）"><a href="#安装-nodejs-和-aapt（电脑版请查看-README-md）" class="headerlink" title="安装 nodejs 和 aapt（电脑版请查看 README.md）"></a>安装 nodejs 和 aapt（电脑版请查看 README.md）</h2><p>打开 Termux，依次执行以下命令，我会一条条讲解。</p><p>事先声明：<strong>由于官方源较慢，请酌情考虑挂梯子执行！</strong><del>也可以自己百度换源（不建议）。</del></p><p>这条命令用于更新目前 Termux 中的所有软件包，在安装过程中如果卡住不动了，请使用输入法，输入一个小写 <code>y</code> 并回车：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg up -y</span><br></pre></td></tr></table></figure></p><p>最后一步，安装 nodejs 和 aapt<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg <span class="keyword">in</span> nodejs aapt -y</span><br></pre></td></tr></table></figure></p><p>检查 nodejs 是否安装，如图所示即为安装成功<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure></p><p><img src="20230505102753101.jpg" alt=""></p><p>这张图来自: <a href="https://telegra.ph/%E7%A5%9E%E7%A7%98%E6%A8%A1%E5%9D%97%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8BAndroid%E7%AB%AF-04-06">神秘模块入门教程（安卓端）</a></p><p>检查 aapt 是否安装成功，如图输出一大堆文字即为成功。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aapt</span><br></pre></td></tr></table></figure></p><p><img src="20230906153119436.jpg" alt="安装成功"></p><p>如果在安装模块时提示 <strong>aapt 环境损坏</strong> 请执行 <code>pkg uninstall aapt</code> 卸载 <strong>aapt</strong> 后执行 <code>pkg up &amp;&amp; pkg in aapt</code> 以重新安装 <strong>aapt</strong>。</p><p>如果在安装模块时提示 <strong>node 环境损坏</strong> 请执行 <code>pkg uninstall nodejs</code> 卸载 <strong>nodejs</strong> 后执行 <code>pkg up &amp;&amp; pkg in nodejs</code> 以重新安装 <strong>nodejs</strong>。</p><h2 id="安装神秘"><a href="#安装神秘" class="headerlink" title="安装神秘"></a>安装神秘</h2><p>前往<a href="https://t.me/+1-1lPvQxklVlZjA1">原始人，启洞！</a>的“啊？”话题下载最新版模块（<strong>注意看群文件</strong>）。安卓版文件名带有 <code>android</code>，选择保存到下载</p><p><img src="20230505095351934.jpg" alt=""></p><p><img src="20230505095357021.jpg" alt="保存到下载"></p><p>打开 Magisk，在模块页面上方选择<code>从本地安装</code>，等待刷入完成后重启</p><p><img src="20230505095457702.jpg" alt="从本地安卓"></p><p><img src="20230505103524540.jpg" alt=""></p><p><img src="20230505103534856.jpg" alt=""></p><p><img src="20230505103540818.jpg" alt=""></p><p><img src="20230505103544263.jpg" alt=""></p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p><del>打开浏览器，地址栏输入并访问 <a href="http://127.0.0.1:23333">http://127.0.0.1:23333</a> 或者 <a href="http://localhost:23333">http://localhost:23333</a>，注意 yard 面板已不内置，若要使用请手动放到 <code>/data/adb/sfm/Dashboard/</code> 文件夹下</del></p><p>目前神秘模块安装时默认会安装“神秘”app，请打开app操作，更新神秘模块时会自动清除数据，保证你用到最新的面板。</p><p>如果你非要使用网页也可，安装模块时使用音量+跳过安装神秘app（是否安装不影响网页使用），更新面板时请<strong>手动清除浏览器缓存或者在网站设置中清除“localhost”的数据再打开面板！</strong></p><p><strong>小白不推荐面板，资深用户请随意。</strong></p><p><img src="20231007234233.jpg" alt="默认密码 node"></p><p>默认密码: <code>node</code>，如无必要，请不要修改。如果输入法输入 <strong>node</strong> 进不去，请复制粘贴，这是你输入法的问题。</p><h2 id="主页"><a href="#主页" class="headerlink" title="主页"></a>主页</h2><p><img src="20231007232729208.jpg" alt=""></p><p>选项详解：</p><div class="table-container"><table><thead><tr><th style="text-align:left">选项</th><th style="text-align:left">解释</th></tr></thead><tbody><tr><td style="text-align:left">启动核心</td><td style="text-align:left">启动 sing-box 核心（开启代理）</td></tr><tr><td style="text-align:left">关闭核心</td><td style="text-align:left">关闭 sing-box 核心（关闭代理）</td></tr><tr><td style="text-align:left">重启核心</td><td style="text-align:left">重启 sing-box 核心（重启代理）</td></tr><tr><td style="text-align:left">操作核心</td><td style="text-align:left">包含<strong>出站设置</strong>、<strong>出站提供者</strong>、<strong>连接情况</strong></td></tr><tr><td style="text-align:left">设置</td><td style="text-align:left">设置选项，用于修改出站、DNS、出站提供者等设置</td></tr></tbody></table></div><h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><p><img src="20231007232747398.jpg" alt=""></p><p>选项解释：</p><div class="table-container"><table><thead><tr><th style="text-align:left">名称</th><th style="text-align:left">解释</th></tr></thead><tbody><tr><td style="text-align:left">出站提供者</td><td style="text-align:left">（机场）网络订阅和本地（节点）文件</td></tr><tr><td style="text-align:left">出站</td><td style="text-align:left">流量出口，指你访问公网的途径</td></tr><tr><td style="text-align:left">规则提供者</td><td style="text-align:left">大饼！是香喷喷的大饼！</td></tr><tr><td style="text-align:left">路由</td><td style="text-align:left">大饼！是香喷喷的大饼！</td></tr><tr><td style="text-align:left">DNS</td><td style="text-align:left">DNS 相关设置</td></tr><tr><td style="text-align:left">模块设置</td><td style="text-align:left">模块设置</td></tr><tr><td style="text-align:left">入站</td><td style="text-align:left">大饼！是香喷喷的大饼！（与出站相对）</td></tr><tr><td style="text-align:left">实验性功能</td><td style="text-align:left">大饼！是香喷喷的大饼！</td></tr><tr><td style="text-align:left">核心日志</td><td style="text-align:left">日志设置，用不到，不用管，不用动</td></tr><tr><td style="text-align:left">内置 NTP</td><td style="text-align:left">NTP 相关设置，用于校准时间，用不到，不用管，不要动</td></tr></tbody></table></div><h2 id="出站提供者"><a href="#出站提供者" class="headerlink" title="出站提供者"></a>出站提供者</h2><p><img src="20231007232750279.jpg" alt=""></p><h3 id="具体操作"><a href="#具体操作" class="headerlink" title="具体操作"></a>具体操作</h3><h4 id="网络订阅"><a href="#网络订阅" class="headerlink" title="网络订阅"></a>网络订阅</h4><p>对于普通用户（不免流），只要设置提供者名称、选择类型为<strong>网络订阅</strong>、订阅链接即可。</p><p>免流其它参数自行修改。</p><h4 id="本地文件"><a href="#本地文件" class="headerlink" title="本地文件"></a>本地文件</h4><p>填入提供者名称、选择<strong>本地文件</strong>类型，之后提交。</p><p>提交完成后会进入文件编辑，此时填入节点信息，保存并再次提交即可。具体如何写请参考<a href="#本地节点文件写法">本地节点文件写法</a>。</p><p>免流用户同上。</p><h3 id="选项解释"><a href="#选项解释" class="headerlink" title="选项解释"></a>选项解释</h3><div class="table-container"><table><thead><tr><th style="text-align:left">名称</th><th style="text-align:left">解释</th></tr></thead><tbody><tr><td style="text-align:left">网络订阅</td><td style="text-align:left">机场网络订阅，从机场服务器获取节点信息</td></tr><tr><td style="text-align:left">本地文件</td><td style="text-align:left">本地节点文件，一般用于自建节点，免流。文件存放位置位于 <code>/data/adb/sfm/src/FileProviders/</code>，现在已经可以通过面板修改，无需打开目录</td></tr><tr><td style="text-align:left">修改文件</td><td style="text-align:left">修改本地节点文件，语法详见<a href="#本地节点文件写法">本地节点文件写法</a></td></tr><tr><td style="text-align:left">订阅链接</td><td style="text-align:left">订阅链接，推荐 Clash 的订阅</td></tr><tr><td style="text-align:left">可否被引用</td><td style="text-align:left">是否启用该出站提供者，启用表示使用这个订阅。喵佬原话：“（不启用）是根本不会被加入配置文件”</td></tr><tr><td style="text-align:left">订阅拉取间隔</td><td style="text-align:left">多久更新一次机场订阅，默认 3600，也就是一个小时</td></tr><tr><td style="text-align:left">拉取订阅时查询订阅信息</td><td style="text-align:left">查询机场流量及使用情况</td></tr><tr><td style="text-align:left">修改提供者内出站设置</td><td style="text-align:left">下面的都是修改请求的，用于免流，不介绍</td></tr></tbody></table></div><h3 id="本地节点文件写法"><a href="#本地节点文件写法" class="headerlink" title="本地节点文件写法"></a>本地节点文件写法</h3><ul><li><p>一行一个节点<br>如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vmess://ew0KICAidiI6ICIyIiwNCiAgInBzIjogIkBTU1JTVUItVjE1LeS7mOi0ueaOqOiNkDpzdW8ueXQvc3Nyc3ViIiwNCiAgImFkZCI6ICJqcDQuYWY0OWM0ZTRjMmVmLnNhbmZlbjAwNC5tZSIsDQogICJwb3J0IjogIjQ0MyIsDQogICJpZCI6ICJjNDg2OGI4YS0xZjVjLTQ1MzYtYjE5MS1kNTQyOWMyZTE0YjciLA0KICAiYWlkIjogIjAiLA0KICAic2N5IjogImF1dG8iLA0KICAibmV0IjogInRjcCIsDQogICJ0eXBlIjogIm5vbmUiLA0KICAiaG9zdCI6ICJqcDQuYWY0OWM0ZTRjMmVmLnNhbmZlbjAwNC5tZSIsDQogICJwYXRoIjogIiIsDQogICJ0bHMiOiAidGxzIiwNCiAgInNuaSI6ICIiLA0KICAiYWxwbiI6ICIiDQp9</span><br><span class="line">vmess://ew0KICAidiI6ICIyIiwNCiAgInBzIjogIkBTU1JTVUItVjE2LeS7mOi0ueaOqOiNkDpzdW8ueXQvc3Nyc3ViIiwNCiAgImFkZCI6ICIxMDQuMjIuNTkuMTk1IiwNCiAgInBvcnQiOiAiNDQzIiwNCiAgImlkIjogImExNTYwYjUyLWI1ODAtNGFhZC1iOGNkLTljZDJlYzUyNjRiNCIsDQogICJhaWQiOiAiMCIsDQogICJzY3kiOiAiYXV0byIsDQogICJuZXQiOiAid3MiLA0KICAidHlwZSI6ICJub25lIiwNCiAgImhvc3QiOiAiMS4yMzkwMDAueHl6IiwNCiAgInBhdGgiOiAiL3ZtZXNzd3MiLA0KICAidGxzIjogInRscyIsDQogICJzbmkiOiAiIiwNCiAgImFscG4iOiAiIg0KfQ==</span><br><span class="line">vmess://ew0KICAidiI6ICIyIiwNCiAgInBzIjogIkBTU1JTVUItVjE3LeS7mOi0ueaOqOiNkDpzdW8ueXQvc3Nyc3ViIiwNCiAgImFkZCI6ICJjZmNkbi5zYW5mZW5jZG4ubmV0IiwNCiAgInBvcnQiOiAiNDQzIiwNCiAgImlkIjogImM0ODY4YjhhLTFmNWMtNDUzNi1iMTkxLWQ1NDI5YzJlMTRiNyIsDQogICJhaWQiOiAiMCIsDQogICJzY3kiOiAiYXV0byIsDQogICJuZXQiOiAid3MiLA0KICAidHlwZSI6ICJub25lIiwNCiAgImhvc3QiOiAidXMxLnNhbmZlbmNkbi5uZXQiLA0KICAicGF0aCI6ICIvemgtY24iLA0KICAidGxzIjogInRscyIsDQogICJzbmkiOiAiIiwNCiAgImFscG4iOiAiIg0KfQ==</span><br></pre></td></tr></table></figure></li><li><p>yaml 写法<br>如：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxies:</span></span><br><span class="line">  <span class="comment"># - &#123;name: 节点名称, type: 协议类型, server: IP地址, port: 端口, udp: 是否是udp底层协议, tls: false, skip-cert-verify: 是否跳过证书验证, headers: &#123;请求头&#125;&#125;</span></span><br><span class="line">  <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">免费节点</span>, <span class="attr">type:</span> <span class="string">http</span>, <span class="attr">server:</span> <span class="number">112.47</span><span class="number">.20</span><span class="number">.215</span>, <span class="attr">port:</span> <span class="number">443</span>, <span class="attr">udp:</span> <span class="literal">false</span>, <span class="attr">tls:</span> <span class="literal">false</span>, <span class="attr">skip-cert-verify:</span> <span class="literal">false</span>, <span class="attr">headers:</span> &#123;&#125;&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="出站"><a href="#出站" class="headerlink" title="出站"></a>出站</h2><p><strong>这两个出站的名字可以改，但不能删除！！！</strong></p><p>修改它们的名字，规则会自动尾随，但是删除会直接变成 <strong>direct</strong>，导致不论如何配置都不能连上外网、进行免流。</p><p>现在他们的名称已被修改，<strong>proxy</strong> 改为了 <strong>国外出口</strong>，<strong>domestic</strong> 改为了 <strong>国内出口</strong>，另 <strong>GLOBAL</strong> 改为了<strong>全局代理</strong></p><p><img src="20231008000436.jpg" alt=""></p><p>如果你删了，没网、报错不要在群里提问！！！</p><p><img src="20231007232910.jpg" alt=""></p><h3 id="具体操作-1"><a href="#具体操作-1" class="headerlink" title="具体操作"></a>具体操作</h3><p>第一步，打开 <strong>国外出口</strong> 的设置，给 <strong>国外出口</strong> 出站选择其他<strong>出站</strong>或者<strong>出站提供者</strong></p><p>假设你又一个出站叫<strong>国外自动</strong>，选择了它之后，你的流量就会通过它。</p><p>比如你又一个出站提供者叫<strong>XX机场</strong>，选择它之后，<strong>国外出口</strong> 出站会包含所有该提供者的出站（节点，如 trojan 协议的），你选择哪个，国外流量就走哪个</p><p>这一步必须选择至少一个<strong>出站</strong>或者<strong>出站提供者</strong>！！！</p><p>第二步，如果你免流，请给 <strong>国内出口</strong> 执行同样的操作，不过它是国内的流量</p><h3 id="选项解释-1"><a href="#选项解释-1" class="headerlink" title="选项解释"></a>选项解释</h3><div class="table-container"><table><thead><tr><th style="text-align:left">名称</th><th style="text-align:left">解释</th></tr></thead><tbody><tr><td style="text-align:left">自动选择</td><td style="text-align:left">自动测速（urltest），自动选择最优（延迟最低）节点</td></tr><tr><td style="text-align:left">手动选择</td><td style="text-align:left">你自己选择节点（select）</td></tr><tr><td style="text-align:left">启用出站</td><td style="text-align:left">是否使用这个出站</td></tr><tr><td style="text-align:left">出站嵌套</td><td style="text-align:left">包含其他出站作为出站提供者。你的默认只有 direct（直连，不通过代理）、block（断开，“黑洞路由”）、proxy（代理）、domestic（国内）</td></tr><tr><td style="text-align:left">出站测试地址</td><td style="text-align:left">测速链接</td></tr><tr><td style="text-align:left">出站测试间隔</td><td style="text-align:left">两次测速之间间隔的时间</td></tr><tr><td style="text-align:left">出站测试容差</td><td style="text-align:left">每个节点测速间隔</td></tr><tr><td style="text-align:left">引用出站提供者</td><td style="text-align:left">嵌套哪些出站提供者。全部表示嵌套所有星盘，部分在下方选择出站提供者</td></tr><tr><td style="text-align:left">筛选出站名称（包含）</td><td style="text-align:left">只要正则表达式匹配到的节点</td></tr><tr><td style="text-align:left">筛选出站名称（排除）</td><td style="text-align:left">不要正则表达式匹配到的节点</td></tr><tr><td style="text-align:left">筛选出站类型</td><td style="text-align:left">如果不选择那么就是选择所有类型（传输协议）；如果选择一个及以上，那么除了你选择的协议类型对应的节点外，其余节点丢弃，不包含在本出站内</td></tr><tr><td style="text-align:left">筛选出站端口</td><td style="text-align:left">只要范围内端口的节点，比如 80:8080，表示只要 80 端口到 8080 端口的节点，:8080 表示比 8080 小的端口（包含）</td></tr></tbody></table></div><h2 id="模块设置"><a href="#模块设置" class="headerlink" title="模块设置"></a>模块设置</h2><p><img src="20231007232932387.jpg" alt=""></p><p>选项解释：</p><div class="table-container"><table><thead><tr><th style="text-align:left">名称</th><th style="text-align:left">解释</th></tr></thead><tbody><tr><td style="text-align:left">核心跟随模块启动</td><td style="text-align:left">开机就自动连上代理</td></tr><tr><td style="text-align:left">设置 api 响应范围</td><td style="text-align:left">仅本机表示只有本机能访问面板；任意来源表示所有连接上这台设备的热点的设备都能访问面板并操控它。面板地址是热点机的局域网 IP 加端口号，比如 <a href="http://192.168.43.1:23333">http://192.168.43.1:23333</a></td></tr><tr><td style="text-align:left">设置 api 验证密钥</td><td style="text-align:left">进入面板的密码</td></tr><tr><td style="text-align:left">定时更新网络订阅</td><td style="text-align:left">字面意思，自动更新机场订阅。关闭之后不会再更新订阅，需要你手动点击<strong>更新</strong>或者<strong>全部施法</strong></td></tr><tr><td style="text-align:left">定时更新 Geo 数据库</td><td style="text-align:left">字面意思，自动更新 Geo 数据库，用来更准确的判断流量是需要走国内还是走国外</td></tr><tr><td style="text-align:left">核心启动时立即守护</td><td style="text-align:left">启动核心就开始守护核心，而不是核心正确启动后</td></tr><tr><td style="text-align:left">切换代理模式</td><td style="text-align:left">神秘的流量处理模式，有规则模式，通过预设的规则自动判断流量走向；全局代理，所有流量都走国外；全局直连，所有流量都走国内</td></tr><tr><td style="text-align:left">开启 ipv6</td><td style="text-align:left">字面意思</td></tr><tr><td style="text-align:left">面板显示速率</td><td style="text-align:left">在主页显示当前的上传和下载的速度</td></tr><tr><td style="text-align:left"><del>使用 yard（不推荐）</del></td><td style="text-align:left">使用 yard 面板，打开后<del>查星盘</del>操作核心不再是神秘，而是 yard，不打开这个选项，也可以通过链接访问 yard：<a href="http://localhost:9909/ui/?hostname=127.0.0.1&amp;port=9909&amp;secret=singBox">http://localhost:9909/ui/?hostname=127.0.0.1&amp;port=9909&amp;secret=singBox</a></td></tr><tr><td style="text-align:left">生成脱敏核心配置</td><td style="text-align:left">生成用于分享求助的 baseConfig.hjson 文件 shareBaseConfig.hjson</td></tr></tbody></table></div><h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><p><img src="20231007232941235.jpg" alt="DNS"></p><p>选项解释：</p><div class="table-container"><table><thead><tr><th style="text-align:left">名称</th><th style="text-align:left">解释</th></tr></thead><tbody><tr><td style="text-align:left">DNS 服务器</td><td style="text-align:left">DNS 服务器配置列表</td></tr><tr><td style="text-align:left">DNS 规则</td><td style="text-align:left">香喷喷的大饼</td></tr><tr><td style="text-align:left">fakeip</td><td style="text-align:left">香喷喷的大饼</td></tr><tr><td style="text-align:left">DNS 配置</td><td style="text-align:left">香喷喷的大饼</td></tr></tbody></table></div><p><img src="23231007232958.jpg" alt="DNS服务器"></p><p><img src="20231007233008821.jpg" alt="新增DNS服务器"></p><p><strong>DNS 服务器</strong>选项解释：</p><div class="table-container"><table><thead><tr><th style="text-align:left">名称</th><th style="text-align:left">解释</th></tr></thead><tbody><tr><td style="text-align:left">新增 DNS 服务器</td><td style="text-align:left">添加 DNS 服务器配置</td></tr><tr><td style="text-align:left">启用 DNS 服务器</td><td style="text-align:left">勾选启用当前 DNS 服务器配置</td></tr><tr><td style="text-align:left">DNS 服务器名称</td><td style="text-align:left">DNS 配置名</td></tr><tr><td style="text-align:left">DNS 服务器地址</td><td style="text-align:left">DNS 服务器地址，比如 <strong>8.8.8.8</strong>、<strong><a href="https://1.12.12.12/dns-query">https://1.12.12.12/dns-query</a></strong>、<strong>local</strong> 等</td></tr><tr><td style="text-align:left">DNS 服务器出站</td><td style="text-align:left">指定出站使用当前 DNS 配置</td></tr><tr><td style="text-align:left">结果偏好</td><td style="text-align:left">共五个选项，<strong>使用全局配置</strong>、<strong>优先4代</strong>、<strong>优先6代</strong>、<strong>仅4代</strong>、<strong>仅6代</strong>，分别对应<strong>全局配置</strong>、<strong>prefer_ipv4</strong>（IPv4 优先）、<strong>prefer_ipv6</strong>（IPv6 优先）、<strong>only_ipv4</strong>（仅 IPv4）、<strong>only_ipv4</strong>（仅 IPv6）。</td></tr><tr><td style="text-align:left">DNS 服务器地址解析器</td><td style="text-align:left">DNS 地址（域名地址）解析的 DNS 配置，或者说，套娃解析？</td></tr><tr><td style="text-align:left">DNS 服务器解析偏好</td><td style="text-align:left">解析当前 DNS 配置地址时使用。共五个选项，<strong>使用全局配置</strong>、<strong>优先 ipv4</strong>、<strong>优先 ipv6</strong>、<strong>仅 ipv4</strong>、<strong>仅 ipv6</strong>，分别对应<strong>全局配置</strong>、<strong>prefer_ipv4</strong>（IPv4 优先）、<strong>prefer_ipv6</strong>（IPv6 优先）、<strong>only_ipv4</strong>（仅 IPv4）、<strong>only_ipv4</strong>（仅 IPv6）。</td></tr><tr><td style="text-align:left">备注</td><td style="text-align:left">当前配置备注</td></tr></tbody></table></div><h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><p>配置文件在 <strong>/data/adb/sfm/src/</strong>（安卓）或者你电脑上放模块的目录的<strong>src</strong>文件夹中。</p><p>修改配置后点击<strong>重启核心</strong>，或者先<strong>关闭核心</strong>再修改或者修改完后前往<strong>涂涂改改</strong> -&gt; <strong> 神秘</strong>，点击<strong>重载基础术士</strong>；修改完后点击<strong>关闭核心</strong>会发生原配置覆盖更改后的配置<strong>导致更改无效</strong></p><p>详细修改可看<a href="https://sing-box.sagernet.org/zh/">官方文档</a>，或者等我更新。</p><p>官方文档配置使用的格式是 JSON，是一种常见的数据格式，而神秘模块的配置使用 HJson 作为配置语言。</p><p>与 JSON 相比，HJson 对于字符串可以不需要使用双引号包含起来，比如 <code>&quot;text&quot;: &quot;你好，这是一段文本&quot;</code> 在 HJson 中应该是这样的：<code>text: 你好，这是一段文本</code>（所有的冒号都是英文冒号）。但请记住，所有关键字都不可以用 <code>&quot;&quot;</code> 包含。</p><p>因为是可以不需要，所以 <code>text: &quot;你好，这是一段文本&quot;</code> 也是合法的。</p><p>又如，在 JSON 中你可以这么写<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;喵喵&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">25</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;男&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;married&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;1xxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;1xxxxxxxxxx&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></p><p>也可以这么写<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;喵喵&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">25</span><span class="punctuation">,</span><span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;男&quot;</span><span class="punctuation">,</span><span class="attr">&quot;married&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;1xxxxxxxxxx&quot;</span><span class="punctuation">,</span> <span class="string">&quot;1xxxxxxxxxx&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></p><p>但在 HJson 中，你只能这么写（写法之一，其他不推荐，易混淆）<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  name: 喵喵</span><br><span class="line">  age: 25</span><br><span class="line">  sex: 男</span><br><span class="line">  married: true</span><br><span class="line">  phone: [</span><br><span class="line">    1xxxxxxxxxx</span><br><span class="line">    1xxxxxxxxxx</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这是关于 <a href="https://www.runoob.com/json/json-tutorial.html">JSON 的教程</a>，希望能对你有所帮助。这是 <a href="https://hjson.github.io/">HJson 的官网</a>。</p><h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="本机有网，热点没网？"><a href="#本机有网，热点没网？" class="headerlink" title="本机有网，热点没网？"></a>本机有网，热点没网？</h2><details>  <summary>本机有网，热点没网？</summary>  <p>请检查是否开启热点模式，如果开了还没网，请尝试关闭或者开启兼容模式，最新版神秘一般不需要开启兼容模式。</p>  <p>如果热点不能访问面板，请开启兼容模式。</p>  <p>喵佬原话：“某些人热点没网就再开起来吧（我也不知道为啥）”</p></details><h2 id="神秘-TProxy-模式怎么开？"><a href="#神秘-TProxy-模式怎么开？" class="headerlink" title="神秘 TProxy 模式怎么开？"></a>神秘 TProxy 模式怎么开？</h2><p>找到 tun 入站，如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  enabled: true</span><br><span class="line">  tag: tun</span><br><span class="line">  type: tun</span><br><span class="line">  interface_name: tun1</span><br><span class="line">  inet4_address: 172.19.0.1/30</span><br><span class="line">  inet6_address: fdfe:dcba:9876::1/126</span><br><span class="line">  strict_route: true</span><br><span class="line">  auto_route: true</span><br><span class="line">  stack: system</span><br><span class="line">  sniff: true</span><br><span class="line">  sniff_override_destination: false</span><br><span class="line">  domain_strategy: ipv4_only</span><br><span class="line">  sniff_override_rules:</span><br><span class="line">  [</span><br><span class="line">    &#123;</span><br><span class="line">      domain:</span><br><span class="line">      [</span><br><span class="line">        Mijia Cloud</span><br><span class="line">        dlg.io.mi.com</span><br><span class="line">      ]</span><br><span class="line">      ip_cidr:</span><br><span class="line">      [</span><br><span class="line">        17.249.0.0/16</span><br><span class="line">        17.252.0.0/16</span><br><span class="line">        17.57.114.0/22</span><br><span class="line">        17.118.128.0/18</span><br><span class="line">        17.118.20.0/23</span><br><span class="line">        2620:149:a44::/48</span><br><span class="line">        2403:300:a42::/48</span><br><span class="line">        2403:300:a51::/48</span><br><span class="line">        2a01:b740:a42::/48</span><br><span class="line">      ]</span><br><span class="line">      domain_suffix:</span><br><span class="line">      [</span><br><span class="line">        .ess.apple.com</span><br><span class="line">        .push.apple.com</span><br><span class="line">        .i.tplinknbu.com</span><br><span class="line">        wap-gw.tplinkcloud.com</span><br><span class="line">        stun.tplinkcloud.com</span><br><span class="line">        .feishu.cn</span><br><span class="line">      ]</span><br><span class="line">      domain_regex: ^(alt[1-8]-)?mtalk4?(-(staging|dev))?\.google\.com$</span><br><span class="line">      invert: true</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>把 <strong>enabled</strong> 后的 <strong>true</strong> 改为 <strong>false</strong>，如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  enabled: false</span><br><span class="line">  tag: tun</span><br><span class="line">  type: tun</span><br><span class="line">  interface_name: tun1</span><br><span class="line">  inet4_address: 172.19.0.1/30</span><br><span class="line">  inet6_address: fdfe:dcba:9876::1/126</span><br><span class="line">  strict_route: true</span><br><span class="line">  auto_route: true</span><br><span class="line">  stack: system</span><br><span class="line">  sniff: true</span><br><span class="line">  sniff_override_destination: false</span><br><span class="line">  domain_strategy: ipv4_only</span><br><span class="line">  sniff_override_rules:</span><br><span class="line">  [</span><br><span class="line">    &#123;</span><br><span class="line">      domain:</span><br><span class="line">      [</span><br><span class="line">        Mijia Cloud</span><br><span class="line">        dlg.io.mi.com</span><br><span class="line">      ]</span><br><span class="line">      ip_cidr:</span><br><span class="line">      [</span><br><span class="line">        17.249.0.0/16</span><br><span class="line">        17.252.0.0/16</span><br><span class="line">        17.57.114.0/22</span><br><span class="line">        17.118.128.0/18</span><br><span class="line">        17.118.20.0/23</span><br><span class="line">        2620:149:a44::/48</span><br><span class="line">        2403:300:a42::/48</span><br><span class="line">        2403:300:a51::/48</span><br><span class="line">        2a01:b740:a42::/48</span><br><span class="line">      ]</span><br><span class="line">      domain_suffix:</span><br><span class="line">      [</span><br><span class="line">        .ess.apple.com</span><br><span class="line">        .push.apple.com</span><br><span class="line">        .i.tplinknbu.com</span><br><span class="line">        wap-gw.tplinkcloud.com</span><br><span class="line">        stun.tplinkcloud.com</span><br><span class="line">        .feishu.cn</span><br><span class="line">      ]</span><br><span class="line">      domain_regex: ^(alt[1-8]-)?mtalk4?(-(staging|dev))?\.google\.com$</span><br><span class="line">      invert: true</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接着找到 tun 入站下的 tproxy 入站，如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  enabled: false</span><br><span class="line">  tag: tproxy</span><br><span class="line">  type: tproxy</span><br><span class="line">  listen: &quot;::&quot;</span><br><span class="line">  listen_port: 10086</span><br><span class="line">  sniff: true</span><br><span class="line">  sniff_override_destination: false</span><br><span class="line">  domain_strategy: ipv4_only</span><br><span class="line">  sniff_override_rules:</span><br><span class="line">  [</span><br><span class="line">    &#123;</span><br><span class="line">      domain:</span><br><span class="line">      [</span><br><span class="line">        Mijia Cloud</span><br><span class="line">        dlg.io.mi.com</span><br><span class="line">      ]</span><br><span class="line">      ip_cidr:</span><br><span class="line">      [</span><br><span class="line">        17.249.0.0/16</span><br><span class="line">        17.252.0.0/16</span><br><span class="line">        17.57.114.0/22</span><br><span class="line">        17.118.128.0/18</span><br><span class="line">        17.118.20.0/23</span><br><span class="line">        2620:149:a44::/48</span><br><span class="line">        2403:300:a42::/48</span><br><span class="line">        2403:300:a51::/48</span><br><span class="line">        2a01:b740:a42::/48</span><br><span class="line">      ]</span><br><span class="line">      domain_suffix:</span><br><span class="line">      [</span><br><span class="line">        .ess.apple.com</span><br><span class="line">        .push.apple.com</span><br><span class="line">        .i.tplinknbu.com</span><br><span class="line">        wap-gw.tplinkcloud.com</span><br><span class="line">        stun.tplinkcloud.com</span><br><span class="line">        .feishu.cn</span><br><span class="line">      ]</span><br><span class="line">      domain_regex: ^(alt[1-8]-)?mtalk4?(-(staging|dev))?\.google\.com$</span><br><span class="line">      invert: true</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>把 <strong>enabled</strong> 后的 <strong>false</strong> 改为 <strong>true</strong>，如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    enabled: true</span><br><span class="line">    tag: tproxy</span><br><span class="line">    type: tproxy</span><br><span class="line">    listen: &quot;::&quot;</span><br><span class="line">    listen_port: 10086</span><br><span class="line">    sniff: true</span><br><span class="line">    sniff_override_destination: false</span><br><span class="line">    domain_strategy: ipv4_only</span><br><span class="line">    sniff_override_rules:</span><br><span class="line">    [</span><br><span class="line">      &#123;</span><br><span class="line">        domain:</span><br><span class="line">        [</span><br><span class="line">          Mijia Cloud</span><br><span class="line">          dlg.io.mi.com</span><br><span class="line">        ]</span><br><span class="line">        ip_cidr:</span><br><span class="line">        [</span><br><span class="line">          17.249.0.0/16</span><br><span class="line">          17.252.0.0/16</span><br><span class="line">          17.57.114.0/22</span><br><span class="line">          17.118.128.0/18</span><br><span class="line">          17.118.20.0/23</span><br><span class="line">          2620:149:a44::/48</span><br><span class="line">          2403:300:a42::/48</span><br><span class="line">          2403:300:a51::/48</span><br><span class="line">          2a01:b740:a42::/48</span><br><span class="line">        ]</span><br><span class="line">        domain_suffix:</span><br><span class="line">        [</span><br><span class="line">          .ess.apple.com</span><br><span class="line">          .push.apple.com</span><br><span class="line">          .i.tplinknbu.com</span><br><span class="line">          wap-gw.tplinkcloud.com</span><br><span class="line">          stun.tplinkcloud.com</span><br><span class="line">          .feishu.cn</span><br><span class="line">        ]</span><br><span class="line">        domain_regex: ^(alt[1-8]-)?mtalk4?(-(staging|dev))?\.google\.com$</span><br><span class="line">        invert: true</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>修改完后保存，打开神秘面板=&gt;涂涂改改=&gt;神秘，点击<strong>重载基础术式</strong>，接着返回主页点击<strong>重启核心</strong>。</p><p>不出所料，已经成功了。</p><p>如果想改回去，修改 enabled 后的值，<strong>false</strong> 改 <strong>true</strong>，<strong>true</strong> 改 <strong>false</strong>，再重载+重启核心即可。</p><h2 id="WiFi-放行怎么做？"><a href="#WiFi-放行怎么做？" class="headerlink" title="WiFi 放行怎么做？"></a>WiFi 放行怎么做？</h2><h3 id="MacroDroid"><a href="#MacroDroid" class="headerlink" title="MacroDroid"></a>MacroDroid</h3><p>下载 <a href="https://t.me/xireikisub/66">MacroDroid</a> 和 <a href="https://t.me/xireikisub/68">MacroDroid 备份</a></p><p>安装 <a href="https://t.me/xireikisub/66">MacroDroid</a> 后，导入 <a href="https://t.me/xireikisub/68">备份文件</a> 到 <a href="https://t.me/xireikisub/66">MacroDroid</a></p><h2 id="怎么放行应用？"><a href="#怎么放行应用？" class="headerlink" title="怎么放行应用？"></a>怎么放行应用？</h2><p>修改 <strong>packages_list</strong> 里的 black 或 white，它们分别是黑名单（放行列表内的应用）和白名单（只代理列表内的应用）。默认是<strong>黑名单</strong>。</p><p>如果你闲麻烦，可以使用我的<a href="https://tpanel.netlify.app">半成品面板</a>，点击动图进入设置-名单里给对应的应用启用即可。</p><p><strong>packages_list</strong> 原始内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">packages_list:</span><br><span class="line">&#123;</span><br><span class="line">  mode: black</span><br><span class="line">  black: []</span><br><span class="line">  white: []</span><br><span class="line">  notice:</span><br><span class="line">  &#x27;&#x27;&#x27;</span><br><span class="line">  mode 有两个值，black or whtie</span><br><span class="line">  两个数组分别对应黑名单和白名单，目前名单里只允许填写包名</span><br><span class="line">  上个版本的 list 会根据 mode 自动转换成 black 和 white 两个数组里的值</span><br><span class="line">  &#x27;&#x27;&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="黑名单"><a href="#黑名单" class="headerlink" title="黑名单"></a>黑名单</h3><p><strong>mode</strong> 默认为黑名单，无须修改，如果要修改，参考白名单。</p><p>在 black 中添加包名，一行一个。</p><p>例如微信是 <strong>com.tencent.mm</strong>，原神是 <strong>com.miHoYo.Yuanshen</strong>（发现了吗？大小写敏感），这是手机应用的唯一名称。在小米手机中，长按桌面应用图标 =&gt; 应用详情 =&gt; 右上角ⓘ，就可以看见包名，点击复制即可。</p><p>如下所示。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">black:</span><br><span class="line">[</span><br><span class="line">  com.tencent.mm</span><br><span class="line">  com.miHoYo.Yuanshen</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="白名单"><a href="#白名单" class="headerlink" title="白名单"></a>白名单</h3><p>修改 <strong>mode</strong> 为 white。像下面这样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">packages_list:</span><br><span class="line">&#123;</span><br><span class="line">  mode: white</span><br><span class="line">  black: []</span><br><span class="line">  white: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 white 中添加包名，一行一个，如下所示。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">white:</span><br><span class="line">[</span><br><span class="line">  com.tencent.mm</span><br><span class="line">  com.miHoYo.Yuanshen</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="怎么开启-关闭-fakeip"><a href="#怎么开启-关闭-fakeip" class="headerlink" title="怎么开启/关闭 fakeip?"></a>怎么开启/关闭 fakeip?</h2><h3 id="关闭"><a href="#关闭" class="headerlink" title="关闭"></a>关闭</h3><p>第一步：打开 <strong>/data/adb/sfm/src/baseConfig.hjson</strong> 配置文件，给以下规则添加 <code>enabled: false</code> 即可（省略号是真的省略，别写到配置里），理论来说其他步骤不用执行。执行只是关闭得更为彻底。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&#123;</span><br><span class="line">  query_type:</span><br><span class="line">  [</span><br><span class="line">    A</span><br><span class="line">    AAAA</span><br><span class="line">  ]</span><br><span class="line">  server: fakedns</span><br><span class="line">  rewrite_ttl: 0</span><br><span class="line">  notice: 对 A 和 AAAA 类型的 DNS 请求返回 fake-ip 以尽量减少本地 dns 解析并尽可能的将域名送向远端。</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>改完之后是这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&#123;</span><br><span class="line">  enabled: false</span><br><span class="line">  query_type:</span><br><span class="line">  [</span><br><span class="line">    A</span><br><span class="line">    AAAA</span><br><span class="line">  ]</span><br><span class="line">  server: fakedns</span><br><span class="line">  rewrite_ttl: 0</span><br><span class="line">  notice: 对 A 和 AAAA 类型的 DNS 请求返回 fake-ip 以尽量减少本地 dns 解析并尽可能的将域名送向远端。</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>改完之后前往面板 =&gt; <strong>设置</strong> =&gt; <strong>模块设置</strong>，点击<strong>重载核心配置</strong>。</p><p>以下步骤只是补充，非必要。</p><p>第二步: 打开神秘面板（或者神秘套壳app），进入<strong>设置</strong> =&gt; <strong>DMS设置</strong> =&gt; <strong>修改FakeIP设置</strong>，取消勾选<strong>启动 FakeIP 支持</strong></p><p>第二步: 进入面板 =&gt; <strong>设置</strong> =&gt; <strong>DMS设置</strong> =&gt; <strong>修改 DNS 服务器</strong> =&gt; <strong>fakedns</strong>，取消勾选<strong>启用 DNS 服务器</strong></p><h3 id="开启"><a href="#开启" class="headerlink" title="开启"></a>开启</h3><p>与关闭相反，去除 <code>enabled: false</code>，然后重载核心配置。</p><p>如果有取消勾选（执行第二步、第三步），请勾选回来。</p><h2 id="Geo-数据库报错？"><a href="#Geo-数据库报错？" class="headerlink" title="Geo 数据库报错？"></a>Geo 数据库报错？</h2><p>如果你在 <strong>开唱</strong>/<strong>重启核心</strong>之后报错了，报错中有 <strong>geo</strong> 字眼，很有可能是 geo 数据库下载错误，请尝试更新 geo 数据库。具体方案：设置 - 模块配置 - 自动更新 Geo 数据库，关了再开即可</p><p>如问题未得到解决，请检查 geo 数据库格式和链接</p><h2 id="遇到-parse-outbound-n-missing-tags-and-uses-怎么办？"><a href="#遇到-parse-outbound-n-missing-tags-and-uses-怎么办？" class="headerlink" title="遇到 parse outbound[n]: missing tags and uses 怎么办？"></a>遇到 parse outbound[n]: missing tags and uses 怎么办？</h2><p><strong>Puer 是只喵 喵</strong>：“你该死，一个 手动选择/自动选择 又不嵌套其他出站又不引用出站提供者，你拿头用”</p><p>请在没有嵌套任何出站、出站提供者的出站内嵌套出站、出站提供者，它不能为空！</p><h2 id="关于报错中出现-1-8-0"><a href="#关于报错中出现-1-8-0" class="headerlink" title="关于报错中出现 1.8.0"></a>关于报错中出现 1.8.0</h2><p>报错：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cache_file and related fields in Clash API is deprecated in sing-box 1.8.0, use experimental.cache_file instead.</span><br></pre></td></tr></table></figure><br>如果你的报错是这个，请遵循<a href="https://sing-box.sagernet.org/zh/migration">迁移指南</a>修改配置或者重新安装神秘。</p><h2 id="关于-NoTermux-版本的神秘"><a href="#关于-NoTermux-版本的神秘" class="headerlink" title="关于 NoTermux 版本的神秘"></a>关于 NoTermux 版本的神秘</h2><p>此版本不需要 Termux，请忽略环境配置步骤，从原版神秘覆盖安装时需要重启，其他与原版相同。</p><p>下载请前往<a href="https://t.me/xiayinlily">我的频道</a>，不保证更新。</p><p><strong>这是修改版，不是神秘</strong></p><p><strong>这是修改版，不是神秘</strong></p><p><strong>这是修改版，不是神秘</strong></p><h2 id="decode-config-at-box-json-route-rule-set-0-missing-path"><a href="#decode-config-at-box-json-route-rule-set-0-missing-path" class="headerlink" title="decode config at box.json: route.rule_set[0]: missing path"></a>decode config at box.json: route.rule_set[0]: missing path</h2><p>神秘的 rule_set 强制本地化，请给 rult_set 设置 path 路径，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  route:</span><br><span class="line">  &#123;</span><br><span class="line">    ...</span><br><span class="line">    rule_set:</span><br><span class="line">    [</span><br><span class="line">      &#123;</span><br><span class="line">        tag: category-ads-all-domain</span><br><span class="line">        path: ./RuleProviders/category-ads-all-domain.srs</span><br><span class="line">        url: https://raw.githubusercontent.com/CHIZI-0618/v2ray-rules-dat/release/singbox_rule_set/geosite-category-ads-all.srs</span><br><span class="line">        type: remote</span><br><span class="line">        format: binary</span><br><span class="line">        download_detour: proxy</span><br><span class="line">        update_interval: 24h</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面中的 path 后面的就是你要设置的内容，神秘的 rule_set 文件放在 <code>/data/adb/sfm/RuleProviders</code> 文件夹下，请遵循模块路径。上方开头的 <strong>./</strong> 表示 <strong>/data/adb/sfm</strong> 目录。</p><p>具体可以查看 <strong><code>/data/adb/sfm/RuleProviders</code></strong> 目录查看有哪些规则。</p><h2 id="强制重启手机后，神秘无法启动？启动失败-node-log-里有-Valid-JSON-关键字"><a href="#强制重启手机后，神秘无法启动？启动失败-node-log-里有-Valid-JSON-关键字" class="headerlink" title="强制重启手机后，神秘无法启动？启动失败 node.log 里有 Valid JSON 关键字?"></a>强制重启手机后，神秘无法启动？启动失败 node.log 里有 Valid JSON 关键字?</h2><p>原因可能是强制重启手机后导致 <strong>appLables.json</strong> 文件损坏，前往 <strong>/data/adb/sfm/src</strong> 删除这个文件后重新刷模块即可解决。</p><h2 id="2024年之后的版本节点全灰如何解决？"><a href="#2024年之后的版本节点全灰如何解决？" class="headerlink" title="2024年之后的版本节点全灰如何解决？"></a>2024年之后的版本节点全灰如何解决？</h2><p>请更新 202401060515 及之后的版本</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
          <category> VPN </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 神秘 </tag>
            
            <tag> Magisk模块 </tag>
            
            <tag> VPN </tag>
            
            <tag> 机场 </tag>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阅读添加番茄小黑屋书籍</title>
      <link href="/posts/1339105875/"/>
      <url>/posts/1339105875/</url>
      
        <content type="html"><![CDATA[<h2 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h2><p>之前在 <a href="/posts/2947658518/">番茄小说书源分享 + 添加小黑屋书籍</a> 简单的提到过在阅读添加番茄小黑屋的小说，但那只是顺便的，而且也不详细、明了，而且书源也没用针对性的优化，导致导入是有很多问题。</p><p>正好最近因为番茄源失效了，需要修复，在参考大佬们的做法后修复了原来的源，顺便添加了一点功能，看到自己的博客，想着便出一个教程，放在博客上。</p><p><s>其实本来打算直接搞个小工具直接解析的，但是我懒，于是随便找了个网页凑活凑活~诶嘿~</s></p><h2 id="导入书源"><a href="#导入书源" class="headerlink" title="导入书源"></a>导入书源</h2><p>第一步当然是<a href="javascript:legado('/file/bookSource.json')">导入书源</a>啦~</p><p>当然，只要导入“<code>番茄小说</code>”就可以了！</p><h2 id="提取数据文件"><a href="#提取数据文件" class="headerlink" title="提取数据文件"></a>提取数据文件</h2><h3 id="方法一（需要root）"><a href="#方法一（需要root）" class="headerlink" title="方法一（需要root）"></a>方法一（需要root）</h3><p>使用<code>MT管理器</code>，打开 <code>/data/data/com.dragon.read/files/000000000000000</code> 文件夹(0表示数字，如果你没有登录多个账号，它只有一个)，复制文件名为 <code>reading_db_000000000000000</code> 的文件到一个不需要 root 也可以访问的目录，比如 <code>/storage/emulated/0/</code>。</p><p><img src="20230311-142952.jpg" alt="复制"></p><p>接着打开浏览器，访问 <a href="https://www.strerr.com/cn/sqliteviewer.html">SQLite在线查看</a>，选择并上传刚刚复制的文件 <code>reading_db_000000000000000</code>。</p><p><img src="20230311_143537.jpg" alt="上传后"></p><p>然后点击上方的选择框，选择 <code>t_book</code>: </p><p><img src="20230311-143346.jpg" alt=""></p><p>再接着找到你想添加到阅读的小黑屋书籍，复制 <code>book_id</code> 列的数字。</p><p><img src="20230311_143631.jpg" alt=""></p><p>替换链接中的 <code>【书籍ID】</code>: <code>https://api5-normal-lq.fqnovel.com/reading/bookapi/detail/v/?book_id=【书籍ID】&amp;iid=466614321180296&amp;aid=1967&amp;version_code=290</code>。</p><p>最后，打开阅读，选择添加网址，填入刚刚替换后的链接。</p><p>到此，一切大功告成！！(σ≧︎▽︎≦︎)σ。</p><h3 id="方法二（免root）"><a href="#方法二（免root）" class="headerlink" title="方法二（免root）"></a>方法二（免root）</h3><p>注意：本方法只适用于 MIUI 系统（小米手机）！其他手机请自行摸索！</p><p>打开备份于恢复，备份番茄免费小说：</p><p><img src="20230311-150556.jpg" alt="备份"></p><p>备份完成后用 MT管理器 打开如图所示文件夹，并点击“番茄免费小说”开头的文件，此时会进入压缩包预览。</p><p><img src="20230311-145608.jpg" alt=""></p><p>如果不想下载 MT管理器，也可以使用自带的文件管理，打开对应路径，修改文件夹，在最后添加 <code>.zip</code>，然后解压，我手机没空间就不解压了。</p><p><img src="20230311-145403.jpg" alt=""></p><p>打开压缩包后点击 <code>apps</code> 文件夹，再点击 <code>com.dragon.read</code> 文件夹，此时会看到一堆文件夹，找到最大的文件夹点进去！此时再点击 <code>files</code> 文件夹进入，如方法一种一样找到一个全是数字的文件夹点击进入。</p><p>接着如图所示，找到类似文件名的文件，解压到一个不需要root也能访问的文件夹，比如 <code>/storage/emulated/0/</code>:</p><p><img src="20230311-145529.jpg" alt="解压文件"></p><p>接着打开浏览器，访问 <a href="https://www.strerr.com/cn/sqliteviewer.html">SQLite在线查看</a>，选择并上传刚刚复制的文件 <code>reading_db_000000000000000</code>。</p><p><img src="20230311_143537.jpg" alt="上传后"></p><p>然后点击上方的选择框，选择 <code>t_book</code>: </p><p><img src="20230311-143346.jpg" alt=""></p><p>再接着找到你想添加到阅读的小黑屋书籍，复制 <code>book_id</code> 列的数字。</p><p><img src="20230311_143631.jpg" alt=""></p><p>替换链接中的 <code>【书籍ID】</code>: <code>https://api5-normal-lq.fqnovel.com/reading/bookapi/detail/v/?book_id=【书籍ID】&amp;iid=466614321180296&amp;aid=1967&amp;version_code=290</code>。</p><p>最后，打开阅读，选择添加网址，填入刚刚替换后的链接。</p><p>到此，一切大功告成！！(σ≧︎▽︎≦︎)σ。</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
          <category> 番茄免费小说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
            <tag> 书源 </tag>
            
            <tag> 番茄免费小说 </tag>
            
            <tag> 小黑屋 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>番茄小说书源分享 + 添加小黑屋书籍</title>
      <link href="/posts/2947658518/"/>
      <url>/posts/2947658518/</url>
      
        <content type="html"><![CDATA[<h2 id="书源"><a href="#书源" class="headerlink" title="书源"></a>书源</h2><p>分享一下自己修改过的 <a href="http://www.coolapk.com/apk/com.dragon.read">番茄免费小说</a> 的书源。</p><h2 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h2><ul><li><p><a href="javascript:legado('/file/bookSource.json')">一键导入书源</a></p></li><li><p><a href="javascript:legado('/file/bookSource.json','copy')">复制网络导入&amp;规则订阅链接</a><br>如果复制失败，也可以手动复制: <code>https://xireiki.netlify.app/file/bookSource.json</code></p></li><li><p><a href="/book/">点击前往我的书源</a></p></li></ul><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>可正常使用发现、搜索，获取正文。</p><h2 id="问：关于添加不可搜索（被关小黑屋）的小说？"><a href="#问：关于添加不可搜索（被关小黑屋）的小说？" class="headerlink" title="问：关于添加不可搜索（被关小黑屋）的小说？"></a>问：关于添加不可搜索（被关小黑屋）的小说？</h2><h3 id="回答一："><a href="#回答一：" class="headerlink" title="回答一："></a>回答一：</h3><p>你需要先获取 root，打开路径为 <code>/data/data/com.dragon.read/files/一串数字/reading_db_还是那一串数字</code> 的文件，搜索你想添加的小说的书名。</p><p>比如：<code>泡泡浅色</code> 的<code>《妖魔复苏：变成萝莉金手指？》</code></p><p>此时你会看到：<img src="2022-12-03-14-53.jpg" alt="图1"></p><p>其中作者名和书名间的数字是 <code>bookid（书籍id）</code>，复制它！最后替换一下链接中的<code>&quot;书籍id&quot;</code>：<code>https://api5-normal-lf.fqnovel.com/reading/bookapi/directory/all_items/v/?need_version=true&amp;book_id=&quot;书籍id&quot;&amp;iid=2665637677906061&amp;aid=1967&amp;app_name=novelapp&amp;version_code=495</code></p><p>替换后是：<code>https://api5-normal-lf.fqnovel.com/reading/bookapi/directory/all_items/v/?need_version=true&amp;book_id=7086301050801490956&amp;iid=2665637677906061&amp;aid=1967&amp;app_name=novelapp&amp;version_code=495</code></p><p>把这个链接粘贴在阅读的如下位置，即可导入不可搜索的书籍。</p><p><img src="2022-12-03-14-57.jpg" alt="图2"></p><h3 id="回答二"><a href="#回答二" class="headerlink" title="回答二"></a>回答二</h3><p>使用系统备份功能备份番茄免费小说，比如小米手机，备份后的文件在 MIUI/backups 里，解压后找到答1中的文件，复制<code>bookid（书籍id）</code>后与答1步骤一致。</p><h3 id="回答三"><a href="#回答三" class="headerlink" title="回答三"></a>回答三</h3><p>复制大佬分享的<code>bookid（书籍id）</code>，然后替换链接，导入。</p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>咱偷偷用！</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
          <category> 番茄免费小说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
            <tag> 书源 </tag>
            
            <tag> 番茄免费小说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rish &amp;&amp; rish-sui</title>
      <link href="/posts/35750/"/>
      <url>/posts/35750/</url>
      
        <content type="html"><![CDATA[<p>还在为终端使用 <code>rish</code> 烦恼？</p><p>来试试 rish 吧！（指软件包，我打包的）</p><p>rish 有两个版本，Shizuku 版 和 Sui 。</p><h2 id="Shizuku-版的-rish"><a href="#Shizuku-版的-rish" class="headerlink" title="Shizuku 版的 rish"></a>Shizuku 版的 rish</h2><p>首先是 Shizuku 版的 Rish，软件包有以下命令: <code>rish</code>, <code>rido</code>, <code>sui</code>, <code>shizuku</code></p><h3 id="命令介绍"><a href="#命令介绍" class="headerlink" title="命令介绍"></a>命令介绍</h3><div class="table-container"><table><thead><tr><th style="text-align:center">命令</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">rish</td><td style="text-align:center">切换到 shizuku 的 shell，权限为激活使用的方法，比如使用 adb (包括无线调试) 激活，就是 shell 权限</td></tr><tr><td style="text-align:center">rido</td><td style="text-align:center"><code>rish -c &quot;命令&quot;</code> 的包装，用于方便的不切换 shell 执行命令</td></tr><tr><td style="text-align:center">sui</td><td style="text-align:center">使用当前 Shell 切换到 rish (需要激活方式为 Root，简单来说，你需要用 Root 激活 Shizuku)</td></tr><tr><td style="text-align:center">shizuku</td><td style="text-align:center">老版本的终端调用方法，和 <code>rido</code> 类似</td></tr></tbody></table></div><h3 id="安装方法"><a href="#安装方法" class="headerlink" title="安装方法"></a>安装方法</h3><ul><li>终端添加软件源<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ <span class="built_in">echo</span> <span class="string">&quot;deb [trusted=yes arch=all] https://dists.netlify.app termux extras&quot;</span> &gt; <span class="variable">$PREFIX</span>/etc/apt/sources.list.d/xireiki.list</span><br></pre></td></tr></table></figure></li><li>然后更新源<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ apt update</span><br></pre></td></tr></table></figure></li><li>最后安装<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ apt install rish</span><br></pre></td></tr></table></figure></li></ul><h3 id="各版本对应的-Sizuku-版本"><a href="#各版本对应的-Sizuku-版本" class="headerlink" title="各版本对应的 Sizuku 版本"></a>各版本对应的 Sizuku 版本</h3><div class="table-container"><table><thead><tr><th style="text-align:center">rish</th><th style="text-align:center">Shizuku</th><th style="text-align:center">CPU 架构</th></tr></thead><tbody><tr><td style="text-align:center">1.0.0</td><td style="text-align:center">12.9.1.r859.28c5098</td><td style="text-align:center">aarch64(arm64), arm, x86, x86_64</td></tr></tbody></table></div><p>注意！！！！！！！版本不同请谨慎安装！！！</p><h2 id="Sui-版的-rish"><a href="#Sui-版的-rish" class="headerlink" title="Sui 版的 rish"></a>Sui 版的 rish</h2><p>接着是 Sui 版的 Rish，软件包有如下命令: <code>rish</code>、<code>rido</code>、<code>sui</code></p><h3 id="命令介绍-1"><a href="#命令介绍-1" class="headerlink" title="命令介绍"></a>命令介绍</h3><div class="table-container"><table><thead><tr><th style="text-align:center">命令</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">rish</td><td style="text-align:center">切换到 Sui 的 shell，权限为 Root (不会吧，都用 Sui 了，怎么可能不是 Root)</td></tr><tr><td style="text-align:center">rido</td><td style="text-align:center"><code>rish -c &quot;命令&quot;</code> 的包装，用于方便的不切换 shell 执行命令</td></tr><tr><td style="text-align:center">sui</td><td style="text-align:center">使用当前 Shell 切换到 rish</td></tr></tbody></table></div><h3 id="安装方法-1"><a href="#安装方法-1" class="headerlink" title="安装方法"></a>安装方法</h3><ul><li>终端添加软件源<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ <span class="built_in">echo</span> <span class="string">&quot;deb [trusted=yes arch=all] https://dists.netlify.app termux extras&quot;</span> &gt; <span class="variable">$PREFIX</span>/etc/apt/sources.list.d/xireiki.list</span><br></pre></td></tr></table></figure></li><li>然后更新源<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ apt update</span><br></pre></td></tr></table></figure></li><li>最后安装<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ apt install rish-sui</span><br></pre></td></tr></table></figure></li></ul><h3 id="各版本对应的-Sui-版本"><a href="#各版本对应的-Sui-版本" class="headerlink" title="各版本对应的 Sui 版本"></a>各版本对应的 Sui 版本</h3><div class="table-container"><table><thead><tr><th style="text-align:center">rish-sui</th><th style="text-align:center">Shizuku</th><th style="text-align:center">CPU 架构</th></tr></thead><tbody><tr><td style="text-align:center">1.0.0</td><td style="text-align:center">v12.6.3</td><td style="text-align:center">aarch64(arm64), arm, x86, x86_64</td></tr></tbody></table></div><p>注意！！！！！！！版本不同请谨慎安装！！！</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
          <category> Termux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Android </tag>
            
            <tag> Root </tag>
            
            <tag> ADB </tag>
            
            <tag> Termux </tag>
            
            <tag> Shizuku </tag>
            
            <tag> Sui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的 Termux 软件包存储库</title>
      <link href="/posts/35761/"/>
      <url>/posts/35761/</url>
      
        <content type="html"><![CDATA[<h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>因为一些需要，我曾用自己匮乏的编程知识写过一些小工具。但是我担心放在 bin 目录时间长了会忘记哪些是自己写的，删除的时候不方便。</p><p>也曾尝试过另外添加一个 PATH 目录用来存放自己的小工具。但是我有强迫症，每次看到我添加的 PATH 目录都忍不住想删除，正巧最近看到了 atilo 的做法，想着自己也弄一个软件源，可以用来分享自己的工具。</p><p>同时，还解决了我的一些问题。</p><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="第一步，安装-apt-ftparchive"><a href="#第一步，安装-apt-ftparchive" class="headerlink" title="第一步，安装 apt-ftparchive"></a>第一步，安装 <code>apt-ftparchive</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ apt update &amp;&amp; apt install apt-ftparchive</span><br></pre></td></tr></table></figure><p>如果没有意外的话，这样就安装好了。</p><h3 id="第二步，生成软件包"><a href="#第二步，生成软件包" class="headerlink" title="第二步，生成软件包"></a>第二步，生成软件包</h3><p>先创建一个目录用来存放已经编译完成的文件，并进入这个目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ $ <span class="built_in">mkdir</span> tool</span><br><span class="line">~ $ <span class="built_in">cd</span> tool</span><br></pre></td></tr></table></figure><p>接下来创建 DEBIAN 目录，用来存放软件包的信息和脚本。</p><p>注意，这个 DEBIAN 目录需要 0755 以上的权限，并且不能高于 0775 。</p><p>我就不给它太高的权限了，给它最低的权限就够了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/tool $ <span class="built_in">mkdir</span> DEBIAN</span><br><span class="line">~/tool $ <span class="built_in">chmod</span> 755 DEBIAN</span><br></pre></td></tr></table></figure><p>我先说一下 DEBIAN 目录下的文件都有哪些。</p><p>DEBIAN 目录下有一个 <code>control</code> 文件和至多四个脚本文件。</p><h4 id="control"><a href="#control" class="headerlink" title="control"></a>control</h4><p><code>control</code> 文件用于写入安装包的识别信息，包括包名、版本、作者、简介等。没有严格的顺序要求。表格中列出常用的关键字和作用。<code>control</code> 文件最后需要添加一个空行。</p><div class="table-container"><table><thead><tr><th style="text-align:center">Name</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">Package</td><td style="text-align:center">软件名，<code>dpkg -l</code> 列出的名字</td></tr><tr><td style="text-align:center">Version</td><td style="text-align:center">版本号 - 修订号</td></tr><tr><td style="text-align:center">Section</td><td style="text-align:center">软件类型，比如 mail, test, x11 等</td></tr><tr><td style="text-align:center">Priority</td><td style="text-align:center">优先级 / 重要性，比如 optional 可选的</td></tr><tr><td style="text-align:center">Architecture</td><td style="text-align:center">软件架构，比如 x86, arm64</td></tr><tr><td style="text-align:center">Depends</td><td style="text-align:center">依赖环境，用，隔开，用 (&gt;=&lt;) 指定版本号</td></tr><tr><td style="text-align:center">Suggests</td><td style="text-align:center">推荐安装，指非必要依赖，可以提供更多功能</td></tr><tr><td style="text-align:center">Maintainer</td><td style="text-align:center">作者 &lt;邮箱或者其他联系方式&gt;</td></tr><tr><td style="text-align:center">Descritprion</td><td style="text-align:center">简介，可以换行书写</td></tr></tbody></table></div><h4 id="额外脚本"><a href="#额外脚本" class="headerlink" title="额外脚本"></a>额外脚本</h4><p>DEBIAN 目录下最多可以放置四个可执行脚本，包括安装前执行的的 <code>preinst</code>、安装后执行的 <code>postinst</code>、卸载前执行的 <code>prerm</code>、卸载前执行的 <code>postrm</code> 四个脚本，它们都需要以 <code>#!/bin/bash</code> 开头，内容与普通脚本无异，文件名不需要后缀。</p><p>四个脚本都需要在打包前给予执行权限。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> a+x preinst</span><br></pre></td></tr></table></figure><p>这是它们的作用</p><div class="table-container"><table><thead><tr><th style="text-align:center">脚本</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center">preinst</td><td style="text-align:center">Debian 软件包 (“.deb”) 解压前执行的脚本，为正在被升级的包停止相关服务，直到升级或安装完成 (成功后执行 postinst 脚本)。</td></tr><tr><td style="text-align:center">postinst</td><td style="text-align:center">主要完成软件包 (“.deb”) 安装完成后所需的配置工作。通常，<code>postinst</code> 脚本要求用户输入，和 / 或警告用户如果接受默认值，应该记得按要求返回重新配置这个软件。 一个软件包安装或升级完成后，postinst 脚本驱动命令，启动或重启相应的服务。</td></tr><tr><td style="text-align:center">prerm</td><td style="text-align:center">停止一个软件包的相关进程，要卸载软件包的相关文件前执行。</td></tr><tr><td style="text-align:center">postrm</td><td style="text-align:center">修改相关文件或连接，和 (或) 卸载软件包所创建的文件。当前的所有配置文件都可在 /var/lib/dpkg/info 目录下找到，与 foo 软件包相关的命名以 “foo” 开头，以 <code>preinst</code>, <code>postinst</code>, 等为扩展。这个目录下的 foo.list 文件列出了软件包安装的所有文件。Debian 里用 <code>apt-get</code> 安装或卸载软件时，会常发生前处理或后处理的错误，这时只要删除对应的脚本文件，重新执行安装或卸载即可。</td></tr></tbody></table></div><h4 id="md5sums"><a href="#md5sums" class="headerlink" title="md5sums"></a>md5sums</h4><p>为了防止安装包被篡改，可以计算每个二进制文件的 md5 值存放在这个文件里。非必要。</p><p>好了，我们接下来创建 <code>control</code> 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/tool $ <span class="built_in">touch</span> DEBIAN/control</span><br></pre></td></tr></table></figure><p>接着编辑 <code>control</code> 文件，具体内容我就不放出来了，你可以根据我上面的内容填写。</p><p>因为我的软件包不复杂，所以不需要其他东西，另外四个脚本就不用建立了。</p><p>整个目录下除了 DEBIAN 以外，都是与系统目录一一对应的。</p><p>我要打包的是 Termux 的软件包，所以目录也需要和 Termux 的文件目录一致。同时，因为没什么配置文件，只有可执行文件，所以只要一个 bin 目录就够了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">~/tool $ <span class="built_in">mkdir</span> -p data/data/com.termux/files/usr/bin</span><br><span class="line">```<span class="string">&#x27;</span></span><br><span class="line"><span class="string">然后让我们把我们自己的可执行文件复制进去。注意不要与其他软件包的可执行文件的文件名一致。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">```bash</span></span><br><span class="line"><span class="string">~/tool $ cp &lt;myfile&gt; data/data/com.termux/files/usr/bin</span></span><br></pre></td></tr></table></figure><p>接着我们回到上级目录，然后用打包命令打包。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ dpkg -b tool tool.deb</span><br></pre></td></tr></table></figure><h3 id="第三步，构建源目录"><a href="#第三步，构建源目录" class="headerlink" title="第三步，构建源目录"></a>第三步，构建源目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ $ <span class="built_in">mkdir</span> -p <span class="built_in">source</span>/dists/termux/extras/binary-all</span><br></pre></td></tr></table></figure><p>把 <code>tool.deb</code> 复制到 <code>source/dists/termux/extras/binary-all</code></p><p>然后执行这些命令初始化:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~ $ <span class="built_in">cd</span> <span class="built_in">source</span></span><br><span class="line">~/source $ apt-ftparchive packages . &gt; ./dists/termux/extras/binary-all/Packages</span><br><span class="line">~/source $ apt-ftparchive contents . &gt; ./dists/termux/extras/Contents-all</span><br><span class="line">~/source $ <span class="built_in">cd</span> ./dists/termux &amp;&amp; apt-ftparchive release . | xargs -0 -I &#123;&#125; <span class="built_in">echo</span> -e <span class="string">&quot;Codename: termux\nVersion: 1\nArchitectures: all\nDescription: termux repository\nSuite: termux\n&#123;&#125;&quot;</span> &gt; ./Release</span><br></pre></td></tr></table></figure><p>最后，用 <code>tree</code> 命令查看目录结构，结果如下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">~/source $ tree</span><br><span class="line">.</span><br><span class="line">├── deploy</span><br><span class="line">└── dists</span><br><span class="line">    └── termux</span><br><span class="line">        ├── Release</span><br><span class="line">        └── extras</span><br><span class="line">            ├── Contents-all</span><br><span class="line">            └── binary-all</span><br><span class="line">                ├── Packages</span><br><span class="line">                ├── mkfsntfs_1.0.0_aarch64.deb</span><br><span class="line">                ├── music-unlock_1.0.0_aarch64.deb</span><br><span class="line">                ├── mytool_1.0.0_aarch64.deb</span><br><span class="line">                ├── mytool_1.0.0_all.deb</span><br><span class="line">                ├── rish-sui_1.0.0_all.deb</span><br><span class="line">                ├── rish_1.0.0_all.deb</span><br><span class="line">                ├── termux-switch_1.0.1_all.deb</span><br><span class="line">                └── tidyfile_1.0.0_all.deb</span><br></pre></td></tr></table></figure><h3 id="第四步，部署到服务器"><a href="#第四步，部署到服务器" class="headerlink" title="第四步，部署到服务器"></a>第四步，部署到服务器</h3><p>这里我用 Github 的 Github Pages 服务</p><p>先去 Github 创建一个仓库，复制 URL</p><p>接着用 <code>git</code> 命令上传</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~/source $ git init</span><br><span class="line">~/source $ git add .</span><br><span class="line">~/source $ git commit -m <span class="string">&quot;First Push&quot;</span></span><br><span class="line">~/source $ git remote add origin &lt;URL&gt;</span><br><span class="line">~/source $ git push --set-upstream origin master</span><br></pre></td></tr></table></figure><p>OK，一切完成</p><h3 id="第五步，添加源"><a href="#第五步，添加源" class="headerlink" title="第五步，添加源"></a>第五步，添加源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [trusted=yes arch=all] &lt;URL&gt; termux extras&quot;</span> &gt; <span class="variable">$PREFIX</span>/etc/apt/sources.list.d/mysource.list</span><br></pre></td></tr></table></figure><p>注意，这里的 URL 不是仓库的 URL，而是你部署的 Github Pages 的访问链接。</p><p>现在更新一下源，就能开始安装自己的软件包了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ $ apt update</span><br><span class="line">~ $ apt install tool</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
          <category> Termux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Termux </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
